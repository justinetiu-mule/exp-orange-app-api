<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:munit="http://www.mulesoft.org/schema/mule/munit" xmlns:munit-tools="http://www.mulesoft.org/schema/mule/munit-tools"
	xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xsi:schemaLocation="
		http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
		http://www.mulesoft.org/schema/mule/munit http://www.mulesoft.org/schema/mule/munit/current/mule-munit.xsd
		http://www.mulesoft.org/schema/mule/munit-tools  http://www.mulesoft.org/schema/mule/munit-tools/current/mule-munit-tools.xsd">
	<munit:config name="exp-orange-app-api-test-suite.xml" />
	<munit:test name="post-sales-test" doc:id="10a52346-043c-46f8-ac0d-9546797deab2" >
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock -  Create Sales HTTP Request" doc:id="f976e967-476f-49ae-b83f-4649144ca816" processor="http:request">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue=" Create Sales HTTP Request" attributeName="doc:name" />
				</munit-tools:with-attributes>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<munit:set-event doc:name="Set Event" doc:id="ff3787c5-3e40-4ce7-8a5b-d9335c27af9e" >
				<munit:payload value='#[output application/json&#10;---&#10;{&#10;    "transactionId": "Orange-001",&#10;    "customer_information": {&#10;        "name": "Bobby Ong",&#10;        "address": "#5 Road, Bambang, Pasig City",&#10;        "age": 21,&#10;        "gender": "M",&#10;        "phone": "+639177777787"&#10;    },&#10;    "line_items": [&#10;        {&#10;            "lineId": "Orange-001-001",&#10;            "product": "Harry Potter and the Chamber of Secrets",&#10;            "unitPrice": 998,&#10;            "quantity": 1&#10;        }&#10;    ],&#10;    "total": 998,&#10;    "mop": "Credit Card",&#10;    "timestamp": "2025-09-29T10:15:00Z"&#10;}]' mediaType="application/json" />
				<munit:variables >
					<munit:variable key="appName" value="exp-orange-app-api" />
					<munit:variable key="correlationId" value="3716f1f2-dd32-4f61-9326-ca11702da44e" />
				</munit:variables>
			</munit:set-event>
			<flow-ref doc:name="post:\sales:application\json:exp-orange-app-api-config" doc:id="f618a69e-bb3f-439e-99c9-0d6e986bbe43" name="post:\sales:application\json:exp-orange-app-api-config"/>
		</munit:execution>
	</munit:test>
	<munit:test name="get-sales-test" doc:id="b5b3053f-d4ae-4ee5-8e7e-dae2815c8166" >
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock - Retrieve Sales Details HTTP Request" doc:id="a6f2dc51-820f-4e17-be16-fc9b907d1bef" processor="http:request">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Retrieve Sales Details HTTP Request" attributeName="doc:name" />
				</munit-tools:with-attributes>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<munit:set-event doc:name="Set Event" doc:id="18115c79-8890-4b4e-8fd7-25a131aca607" >
				<munit:attributes value='#[output application/json&#10;---&#10;{&#10;	uriParams: {&#10;		transactionId: "B10001"&#10;	}&#10;}]' mediaType="application/json" />
				<munit:variables >
					<munit:variable key="appName" value="exp-orange-app-api" />
					<munit:variable key="correlationId" value="3716f1f2-dd32-4f61-9326-ca11702da44e" />
				</munit:variables>
			</munit:set-event>
			<flow-ref doc:name="get:\sales\(transactionId):exp-orange-app-api-config" doc:id="021e811c-c82b-4872-9d50-f5e18e0a8df4" name="get:\sales\(transactionId):exp-orange-app-api-config"/>
		</munit:execution>
	</munit:test>
	<munit:test name="exp-orange-app-api-main-test" doc:id="2b6ce208-e9cb-4f3d-ad16-445e64aab75e" >
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock - Listener" doc:id="9be9df7e-d392-4842-a0fe-984ccb6bd16a" processor="http:listener">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="exp-orange-app-api-httpListenerConfig" attributeName="config-ref" />
				</munit-tools:with-attributes>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Mock - APIkit Router" doc:id="d844e856-8ac1-4675-817e-f19fe97ebdc1" processor="apikit:router">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="exp-orange-app-api-config" attributeName="config-ref" />
				</munit-tools:with-attributes>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<munit:set-event doc:name="Set Event" doc:id="8f6437ca-0799-4321-bfa8-cc783e664d6d" >
				<munit:attributes value='#[output application/json&#10;---&#10;{&#10;	uriParams: {&#10;		transactionId: "B10001"&#10;	}&#10;}]' />
			</munit:set-event>
			<flow-ref doc:name="exp-orange-app-api-main" doc:id="4a23e50e-8f6d-4854-a981-83101cf6460c" name="exp-orange-app-api-main"/>
		</munit:execution>
	</munit:test>


</mule>
